/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/dashboard/stats/route";
exports.ids = ["app/api/dashboard/stats/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fdashboard%2Fstats%2Froute&page=%2Fapi%2Fdashboard%2Fstats%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdashboard%2Fstats%2Froute.js&appDir=E%3A%5Cweb%5CDS-360%20Products%5Cdatabase-management-system%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5Cweb%5CDS-360%20Products%5Cdatabase-management-system&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fdashboard%2Fstats%2Froute&page=%2Fapi%2Fdashboard%2Fstats%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdashboard%2Fstats%2Froute.js&appDir=E%3A%5Cweb%5CDS-360%20Products%5Cdatabase-management-system%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5Cweb%5CDS-360%20Products%5Cdatabase-management-system&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var E_web_DS_360_Products_database_management_system_src_app_api_dashboard_stats_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/dashboard/stats/route.js */ \"(rsc)/./src/app/api/dashboard/stats/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/dashboard/stats/route\",\n        pathname: \"/api/dashboard/stats\",\n        filename: \"route\",\n        bundlePath: \"app/api/dashboard/stats/route\"\n    },\n    resolvedPagePath: \"E:\\\\web\\\\DS-360 Products\\\\database-management-system\\\\src\\\\app\\\\api\\\\dashboard\\\\stats\\\\route.js\",\n    nextConfigOutput,\n    userland: E_web_DS_360_Products_database_management_system_src_app_api_dashboard_stats_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZkYXNoYm9hcmQlMkZzdGF0cyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGZGFzaGJvYXJkJTJGc3RhdHMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZkYXNoYm9hcmQlMkZzdGF0cyUyRnJvdXRlLmpzJmFwcERpcj1FJTNBJTVDd2ViJTVDRFMtMzYwJTIwUHJvZHVjdHMlNUNkYXRhYmFzZS1tYW5hZ2VtZW50LXN5c3RlbSU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9RSUzQSU1Q3dlYiU1Q0RTLTM2MCUyMFByb2R1Y3RzJTVDZGF0YWJhc2UtbWFuYWdlbWVudC1zeXN0ZW0maXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQytDO0FBQzVIO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJFOlxcXFx3ZWJcXFxcRFMtMzYwIFByb2R1Y3RzXFxcXGRhdGFiYXNlLW1hbmFnZW1lbnQtc3lzdGVtXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGRhc2hib2FyZFxcXFxzdGF0c1xcXFxyb3V0ZS5qc1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvZGFzaGJvYXJkL3N0YXRzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZGFzaGJvYXJkL3N0YXRzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9kYXNoYm9hcmQvc3RhdHMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJFOlxcXFx3ZWJcXFxcRFMtMzYwIFByb2R1Y3RzXFxcXGRhdGFiYXNlLW1hbmFnZW1lbnQtc3lzdGVtXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGRhc2hib2FyZFxcXFxzdGF0c1xcXFxyb3V0ZS5qc1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fdashboard%2Fstats%2Froute&page=%2Fapi%2Fdashboard%2Fstats%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdashboard%2Fstats%2Froute.js&appDir=E%3A%5Cweb%5CDS-360%20Products%5Cdatabase-management-system%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5Cweb%5CDS-360%20Products%5Cdatabase-management-system&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/dashboard/stats/route.js":
/*!**********************************************!*\
  !*** ./src/app/api/dashboard/stats/route.js ***!
  \**********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_auth_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../lib/auth.js */ \"(rsc)/./src/lib/auth.js\");\n/* harmony import */ var _lib_database__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../lib/database */ \"(rsc)/./src/lib/database.js\");\n/* harmony import */ var _models_Document__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../models/Document */ \"(rsc)/./src/models/Document.js\");\n/* harmony import */ var _models_Folder__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../models/Folder */ \"(rsc)/./src/models/Folder.js\");\n/* harmony import */ var _models_User__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../models/User */ \"(rsc)/./src/models/User.js\");\n\n\n\n\n\n\nasync function GET(request) {\n    try {\n        await (0,_lib_database__WEBPACK_IMPORTED_MODULE_2__.connectDB)();\n        // Check authentication\n        const token = request.cookies.get(\"token\")?.value;\n        let user = await (0,_lib_auth_js__WEBPACK_IMPORTED_MODULE_1__.verifyToken)(token);\n        if (!user) {\n            // For development mode, create a demo user if no auth\n            if (true) {\n                console.log(\"No auth in development mode, using demo user\");\n                user = {\n                    userId: \"demo-user-id\",\n                    email: \"demo@dms360.com\",\n                    role: \"admin\"\n                };\n            } else {}\n        }\n        // Build queries based on user role\n        let documentQuery = {\n            isLatestVersion: true,\n            isActive: true\n        };\n        let folderQuery = {};\n        // If user is not admin, filter by permissions\n        if (user.role !== \"admin\") {\n            // For documents, filter by user's access\n            // This assumes documents inherit folder permissions\n            const accessibleFolderIds = await _models_Folder__WEBPACK_IMPORTED_MODULE_4__.Folder.find({\n                \"permissions.userId\": user.userId || user._id\n            }).distinct(\"_id\");\n            documentQuery.folderId = {\n                $in: accessibleFolderIds\n            };\n            // For folders, filter by user's permissions\n            folderQuery = {\n                \"permissions.userId\": user.userId || user._id\n            };\n        }\n        // Get statistics\n        const [totalDocuments, totalFolders, totalUsers, storageUsed] = await Promise.all([\n            _models_Document__WEBPACK_IMPORTED_MODULE_3__.Document.countDocuments(documentQuery),\n            _models_Folder__WEBPACK_IMPORTED_MODULE_4__.Folder.countDocuments(folderQuery),\n            _models_User__WEBPACK_IMPORTED_MODULE_5__.User.countDocuments({}),\n            _models_Document__WEBPACK_IMPORTED_MODULE_3__.Document.aggregate([\n                {\n                    $match: documentQuery\n                },\n                {\n                    $group: {\n                        _id: null,\n                        totalSize: {\n                            $sum: \"$size\"\n                        }\n                    }\n                }\n            ])\n        ]);\n        // Extract storage size from aggregation result\n        const storageSize = storageUsed.length > 0 ? storageUsed[0].totalSize : 0;\n        const stats = {\n            totalDocuments,\n            totalFolders,\n            totalUsers,\n            storageUsed: storageSize\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: stats\n        });\n    } catch (error) {\n        console.error(\"Dashboard stats error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9kYXNoYm9hcmQvc3RhdHMvcm91dGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUEyQztBQUNXO0FBQ0Q7QUFDRTtBQUNKO0FBQ0o7QUFFeEMsZUFBZU0sSUFBSUMsT0FBTztJQUMvQixJQUFJO1FBQ0YsTUFBTUwsd0RBQVNBO1FBRWYsdUJBQXVCO1FBQ3ZCLE1BQU1NLFFBQVFELFFBQVFFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLFVBQVVDO1FBQzVDLElBQUlDLE9BQU8sTUFBTVgseURBQVdBLENBQUNPO1FBRTdCLElBQUksQ0FBQ0ksTUFBTTtZQUNULHNEQUFzRDtZQUN0RCxJQUFJQyxJQUFzQyxFQUFFO2dCQUMxQ0MsUUFBUUMsR0FBRyxDQUFDO2dCQUNaSCxPQUFPO29CQUNMSSxRQUFRO29CQUNSQyxPQUFPO29CQUNQQyxNQUFNO2dCQUNSO1lBQ0YsT0FBTyxFQUtOO1FBQ0g7UUFFQSxtQ0FBbUM7UUFDbkMsSUFBSUssZ0JBQWdCO1lBQUVDLGlCQUFpQjtZQUFNQyxVQUFVO1FBQUs7UUFDNUQsSUFBSUMsY0FBYyxDQUFDO1FBRW5CLDhDQUE4QztRQUM5QyxJQUFJZCxLQUFLTSxJQUFJLEtBQUssU0FBUztZQUN6Qix5Q0FBeUM7WUFDekMsb0RBQW9EO1lBQ3BELE1BQU1TLHNCQUFzQixNQUFNdkIsa0RBQU1BLENBQUN3QixJQUFJLENBQUM7Z0JBQzVDLHNCQUFzQmhCLEtBQUtJLE1BQU0sSUFBSUosS0FBS2lCLEdBQUc7WUFDL0MsR0FBR0MsUUFBUSxDQUFDO1lBRVpQLGNBQWNRLFFBQVEsR0FBRztnQkFBRUMsS0FBS0w7WUFBb0I7WUFFcEQsNENBQTRDO1lBQzVDRCxjQUFjO2dCQUNaLHNCQUFzQmQsS0FBS0ksTUFBTSxJQUFJSixLQUFLaUIsR0FBRztZQUMvQztRQUNGO1FBRUEsaUJBQWlCO1FBQ2pCLE1BQU0sQ0FBQ0ksZ0JBQWdCQyxjQUFjQyxZQUFZQyxZQUFZLEdBQzNELE1BQU1DLFFBQVFDLEdBQUcsQ0FBQztZQUNoQm5DLHNEQUFRQSxDQUFDb0MsY0FBYyxDQUFDaEI7WUFDeEJuQixrREFBTUEsQ0FBQ21DLGNBQWMsQ0FBQ2I7WUFDdEJyQiw4Q0FBSUEsQ0FBQ2tDLGNBQWMsQ0FBQyxDQUFDO1lBQ3JCcEMsc0RBQVFBLENBQUNxQyxTQUFTLENBQUM7Z0JBQ2pCO29CQUFFQyxRQUFRbEI7Z0JBQWM7Z0JBQ3hCO29CQUNFbUIsUUFBUTt3QkFDTmIsS0FBSzt3QkFDTGMsV0FBVzs0QkFBRUMsTUFBTTt3QkFBUTtvQkFDN0I7Z0JBQ0Y7YUFDRDtTQUNGO1FBRUgsK0NBQStDO1FBQy9DLE1BQU1DLGNBQWNULFlBQVlVLE1BQU0sR0FBRyxJQUFJVixXQUFXLENBQUMsRUFBRSxDQUFDTyxTQUFTLEdBQUc7UUFFeEUsTUFBTUksUUFBUTtZQUNaZDtZQUNBQztZQUNBQztZQUNBQyxhQUFhUztRQUNmO1FBRUEsT0FBTzdDLHFEQUFZQSxDQUFDbUIsSUFBSSxDQUFDO1lBQ3ZCQyxTQUFTO1lBQ1Q0QixNQUFNRDtRQUNSO0lBQ0YsRUFBRSxPQUFPMUIsT0FBTztRQUNkUCxRQUFRTyxLQUFLLENBQUMsMEJBQTBCQTtRQUN4QyxPQUFPckIscURBQVlBLENBQUNtQixJQUFJLENBQ3RCO1lBQUVDLFNBQVM7WUFBT0MsT0FBTztRQUF3QixHQUNqRDtZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsiRTpcXHdlYlxcRFMtMzYwIFByb2R1Y3RzXFxkYXRhYmFzZS1tYW5hZ2VtZW50LXN5c3RlbVxcc3JjXFxhcHBcXGFwaVxcZGFzaGJvYXJkXFxzdGF0c1xccm91dGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5pbXBvcnQgeyB2ZXJpZnlUb2tlbiB9IGZyb20gXCIuLi8uLi8uLi8uLi9saWIvYXV0aC5qc1wiO1xuaW1wb3J0IHsgY29ubmVjdERCIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2xpYi9kYXRhYmFzZVwiO1xuaW1wb3J0IHsgRG9jdW1lbnQgfSBmcm9tIFwiLi4vLi4vLi4vLi4vbW9kZWxzL0RvY3VtZW50XCI7XG5pbXBvcnQgeyBGb2xkZXIgfSBmcm9tIFwiLi4vLi4vLi4vLi4vbW9kZWxzL0ZvbGRlclwiO1xuaW1wb3J0IHsgVXNlciB9IGZyb20gXCIuLi8uLi8uLi8uLi9tb2RlbHMvVXNlclwiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBjb25uZWN0REIoKTtcblxuICAgIC8vIENoZWNrIGF1dGhlbnRpY2F0aW9uXG4gICAgY29uc3QgdG9rZW4gPSByZXF1ZXN0LmNvb2tpZXMuZ2V0KFwidG9rZW5cIik/LnZhbHVlO1xuICAgIGxldCB1c2VyID0gYXdhaXQgdmVyaWZ5VG9rZW4odG9rZW4pO1xuXG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICAvLyBGb3IgZGV2ZWxvcG1lbnQgbW9kZSwgY3JlYXRlIGEgZGVtbyB1c2VyIGlmIG5vIGF1dGhcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiTm8gYXV0aCBpbiBkZXZlbG9wbWVudCBtb2RlLCB1c2luZyBkZW1vIHVzZXJcIik7XG4gICAgICAgIHVzZXIgPSB7XG4gICAgICAgICAgdXNlcklkOiBcImRlbW8tdXNlci1pZFwiLFxuICAgICAgICAgIGVtYWlsOiBcImRlbW9AZG1zMzYwLmNvbVwiLFxuICAgICAgICAgIHJvbGU6IFwiYWRtaW5cIixcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJVbmF1dGhvcml6ZWRcIiB9LFxuICAgICAgICAgIHsgc3RhdHVzOiA0MDEgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEJ1aWxkIHF1ZXJpZXMgYmFzZWQgb24gdXNlciByb2xlXG4gICAgbGV0IGRvY3VtZW50UXVlcnkgPSB7IGlzTGF0ZXN0VmVyc2lvbjogdHJ1ZSwgaXNBY3RpdmU6IHRydWUgfTtcbiAgICBsZXQgZm9sZGVyUXVlcnkgPSB7fTtcblxuICAgIC8vIElmIHVzZXIgaXMgbm90IGFkbWluLCBmaWx0ZXIgYnkgcGVybWlzc2lvbnNcbiAgICBpZiAodXNlci5yb2xlICE9PSBcImFkbWluXCIpIHtcbiAgICAgIC8vIEZvciBkb2N1bWVudHMsIGZpbHRlciBieSB1c2VyJ3MgYWNjZXNzXG4gICAgICAvLyBUaGlzIGFzc3VtZXMgZG9jdW1lbnRzIGluaGVyaXQgZm9sZGVyIHBlcm1pc3Npb25zXG4gICAgICBjb25zdCBhY2Nlc3NpYmxlRm9sZGVySWRzID0gYXdhaXQgRm9sZGVyLmZpbmQoe1xuICAgICAgICBcInBlcm1pc3Npb25zLnVzZXJJZFwiOiB1c2VyLnVzZXJJZCB8fCB1c2VyLl9pZCxcbiAgICAgIH0pLmRpc3RpbmN0KFwiX2lkXCIpO1xuXG4gICAgICBkb2N1bWVudFF1ZXJ5LmZvbGRlcklkID0geyAkaW46IGFjY2Vzc2libGVGb2xkZXJJZHMgfTtcblxuICAgICAgLy8gRm9yIGZvbGRlcnMsIGZpbHRlciBieSB1c2VyJ3MgcGVybWlzc2lvbnNcbiAgICAgIGZvbGRlclF1ZXJ5ID0ge1xuICAgICAgICBcInBlcm1pc3Npb25zLnVzZXJJZFwiOiB1c2VyLnVzZXJJZCB8fCB1c2VyLl9pZCxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gR2V0IHN0YXRpc3RpY3NcbiAgICBjb25zdCBbdG90YWxEb2N1bWVudHMsIHRvdGFsRm9sZGVycywgdG90YWxVc2Vycywgc3RvcmFnZVVzZWRdID1cbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgRG9jdW1lbnQuY291bnREb2N1bWVudHMoZG9jdW1lbnRRdWVyeSksXG4gICAgICAgIEZvbGRlci5jb3VudERvY3VtZW50cyhmb2xkZXJRdWVyeSksXG4gICAgICAgIFVzZXIuY291bnREb2N1bWVudHMoe30pLFxuICAgICAgICBEb2N1bWVudC5hZ2dyZWdhdGUoW1xuICAgICAgICAgIHsgJG1hdGNoOiBkb2N1bWVudFF1ZXJ5IH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgJGdyb3VwOiB7XG4gICAgICAgICAgICAgIF9pZDogbnVsbCxcbiAgICAgICAgICAgICAgdG90YWxTaXplOiB7ICRzdW06IFwiJHNpemVcIiB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICBdKSxcbiAgICAgIF0pO1xuXG4gICAgLy8gRXh0cmFjdCBzdG9yYWdlIHNpemUgZnJvbSBhZ2dyZWdhdGlvbiByZXN1bHRcbiAgICBjb25zdCBzdG9yYWdlU2l6ZSA9IHN0b3JhZ2VVc2VkLmxlbmd0aCA+IDAgPyBzdG9yYWdlVXNlZFswXS50b3RhbFNpemUgOiAwO1xuXG4gICAgY29uc3Qgc3RhdHMgPSB7XG4gICAgICB0b3RhbERvY3VtZW50cyxcbiAgICAgIHRvdGFsRm9sZGVycyxcbiAgICAgIHRvdGFsVXNlcnMsXG4gICAgICBzdG9yYWdlVXNlZDogc3RvcmFnZVNpemUsXG4gICAgfTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZGF0YTogc3RhdHMsXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkRhc2hib2FyZCBzdGF0cyBlcnJvcjpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwidmVyaWZ5VG9rZW4iLCJjb25uZWN0REIiLCJEb2N1bWVudCIsIkZvbGRlciIsIlVzZXIiLCJHRVQiLCJyZXF1ZXN0IiwidG9rZW4iLCJjb29raWVzIiwiZ2V0IiwidmFsdWUiLCJ1c2VyIiwicHJvY2VzcyIsImNvbnNvbGUiLCJsb2ciLCJ1c2VySWQiLCJlbWFpbCIsInJvbGUiLCJqc29uIiwic3VjY2VzcyIsImVycm9yIiwic3RhdHVzIiwiZG9jdW1lbnRRdWVyeSIsImlzTGF0ZXN0VmVyc2lvbiIsImlzQWN0aXZlIiwiZm9sZGVyUXVlcnkiLCJhY2Nlc3NpYmxlRm9sZGVySWRzIiwiZmluZCIsIl9pZCIsImRpc3RpbmN0IiwiZm9sZGVySWQiLCIkaW4iLCJ0b3RhbERvY3VtZW50cyIsInRvdGFsRm9sZGVycyIsInRvdGFsVXNlcnMiLCJzdG9yYWdlVXNlZCIsIlByb21pc2UiLCJhbGwiLCJjb3VudERvY3VtZW50cyIsImFnZ3JlZ2F0ZSIsIiRtYXRjaCIsIiRncm91cCIsInRvdGFsU2l6ZSIsIiRzdW0iLCJzdG9yYWdlU2l6ZSIsImxlbmd0aCIsInN0YXRzIiwiZGF0YSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/dashboard/stats/route.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.js":
/*!*************************!*\
  !*** ./src/lib/auth.js ***!
  \*************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   requireAuth: () => (/* binding */ requireAuth),\n/* harmony export */   requireRole: () => (/* binding */ requireRole),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n\nasync function verifyToken(token) {\n    if (!token) {\n        return null;\n    }\n    try {\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__.verify(token, process.env.JWT_SECRET);\n        return decoded;\n    } catch (error) {\n        console.error(\"Token verification error:\", error);\n        return null;\n    }\n}\nfunction requireAuth(handler) {\n    return async (request)=>{\n        const token = request.cookies.get(\"token\")?.value;\n        const user = await verifyToken(token);\n        if (!user) {\n            return new Response(JSON.stringify({\n                success: false,\n                error: \"Unauthorized\"\n            }), {\n                status: 401,\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n        }\n        request.user = user;\n        return handler(request);\n    };\n}\nfunction requireRole(allowedRoles) {\n    return (handler)=>{\n        return async (request)=>{\n            const token = request.cookies.get(\"token\")?.value;\n            const user = await verifyToken(token);\n            if (!user) {\n                return new Response(JSON.stringify({\n                    success: false,\n                    error: \"Unauthorized\"\n                }), {\n                    status: 401,\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    }\n                });\n            }\n            if (!allowedRoles.includes(user.role)) {\n                return new Response(JSON.stringify({\n                    success: false,\n                    error: \"Forbidden\"\n                }), {\n                    status: 403,\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    }\n                });\n            }\n            request.user = user;\n            return handler(request);\n        };\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUErQjtBQUV4QixlQUFlQyxZQUFZQyxLQUFLO0lBQ3JDLElBQUksQ0FBQ0EsT0FBTztRQUNWLE9BQU87SUFDVDtJQUVBLElBQUk7UUFDRixNQUFNQyxVQUFVSCxnREFBVSxDQUFDRSxPQUFPRyxRQUFRQyxHQUFHLENBQUNDLFVBQVU7UUFDeEQsT0FBT0o7SUFDVCxFQUFFLE9BQU9LLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLDZCQUE2QkE7UUFDM0MsT0FBTztJQUNUO0FBQ0Y7QUFFTyxTQUFTRSxZQUFZQyxPQUFPO0lBQ2pDLE9BQU8sT0FBT0M7UUFDWixNQUFNVixRQUFRVSxRQUFRQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxVQUFVQztRQUM1QyxNQUFNQyxPQUFPLE1BQU1mLFlBQVlDO1FBRS9CLElBQUksQ0FBQ2MsTUFBTTtZQUNULE9BQU8sSUFBSUMsU0FDVEMsS0FBS0MsU0FBUyxDQUFDO2dCQUFFQyxTQUFTO2dCQUFPWixPQUFPO1lBQWUsSUFDdkQ7Z0JBQUVhLFFBQVE7Z0JBQUtDLFNBQVM7b0JBQUUsZ0JBQWdCO2dCQUFtQjtZQUFFO1FBRW5FO1FBRUFWLFFBQVFJLElBQUksR0FBR0E7UUFDZixPQUFPTCxRQUFRQztJQUNqQjtBQUNGO0FBRU8sU0FBU1csWUFBWUMsWUFBWTtJQUN0QyxPQUFPLENBQUNiO1FBQ04sT0FBTyxPQUFPQztZQUNaLE1BQU1WLFFBQVFVLFFBQVFDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLFVBQVVDO1lBQzVDLE1BQU1DLE9BQU8sTUFBTWYsWUFBWUM7WUFFL0IsSUFBSSxDQUFDYyxNQUFNO2dCQUNULE9BQU8sSUFBSUMsU0FDVEMsS0FBS0MsU0FBUyxDQUFDO29CQUFFQyxTQUFTO29CQUFPWixPQUFPO2dCQUFlLElBQ3ZEO29CQUFFYSxRQUFRO29CQUFLQyxTQUFTO3dCQUFFLGdCQUFnQjtvQkFBbUI7Z0JBQUU7WUFFbkU7WUFFQSxJQUFJLENBQUNFLGFBQWFDLFFBQVEsQ0FBQ1QsS0FBS1UsSUFBSSxHQUFHO2dCQUNyQyxPQUFPLElBQUlULFNBQ1RDLEtBQUtDLFNBQVMsQ0FBQztvQkFBRUMsU0FBUztvQkFBT1osT0FBTztnQkFBWSxJQUNwRDtvQkFBRWEsUUFBUTtvQkFBS0MsU0FBUzt3QkFBRSxnQkFBZ0I7b0JBQW1CO2dCQUFFO1lBRW5FO1lBRUFWLFFBQVFJLElBQUksR0FBR0E7WUFDZixPQUFPTCxRQUFRQztRQUNqQjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIkU6XFx3ZWJcXERTLTM2MCBQcm9kdWN0c1xcZGF0YWJhc2UtbWFuYWdlbWVudC1zeXN0ZW1cXHNyY1xcbGliXFxhdXRoLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5VG9rZW4odG9rZW4pIHtcbiAgaWYgKCF0b2tlbikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCk7XG4gICAgcmV0dXJuIGRlY29kZWQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIlRva2VuIHZlcmlmaWNhdGlvbiBlcnJvcjpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXF1aXJlQXV0aChoYW5kbGVyKSB7XG4gIHJldHVybiBhc3luYyAocmVxdWVzdCkgPT4ge1xuICAgIGNvbnN0IHRva2VuID0gcmVxdWVzdC5jb29raWVzLmdldChcInRva2VuXCIpPy52YWx1ZTtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgdmVyaWZ5VG9rZW4odG9rZW4pO1xuXG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKFxuICAgICAgICBKU09OLnN0cmluZ2lmeSh7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJVbmF1dGhvcml6ZWRcIiB9KSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMSwgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9IH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmVxdWVzdC51c2VyID0gdXNlcjtcbiAgICByZXR1cm4gaGFuZGxlcihyZXF1ZXN0KTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlcXVpcmVSb2xlKGFsbG93ZWRSb2xlcykge1xuICByZXR1cm4gKGhhbmRsZXIpID0+IHtcbiAgICByZXR1cm4gYXN5bmMgKHJlcXVlc3QpID0+IHtcbiAgICAgIGNvbnN0IHRva2VuID0gcmVxdWVzdC5jb29raWVzLmdldChcInRva2VuXCIpPy52YWx1ZTtcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB2ZXJpZnlUb2tlbih0b2tlbik7XG5cbiAgICAgIGlmICghdXNlcikge1xuICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKFxuICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIlVuYXV0aG9yaXplZFwiIH0pLFxuICAgICAgICAgIHsgc3RhdHVzOiA0MDEsIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSB9XG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGlmICghYWxsb3dlZFJvbGVzLmluY2x1ZGVzKHVzZXIucm9sZSkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZShcbiAgICAgICAgICBKU09OLnN0cmluZ2lmeSh7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJGb3JiaWRkZW5cIiB9KSxcbiAgICAgICAgICB7IHN0YXR1czogNDAzLCBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0gfVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByZXF1ZXN0LnVzZXIgPSB1c2VyO1xuICAgICAgcmV0dXJuIGhhbmRsZXIocmVxdWVzdCk7XG4gICAgfTtcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJqd3QiLCJ2ZXJpZnlUb2tlbiIsInRva2VuIiwiZGVjb2RlZCIsInZlcmlmeSIsInByb2Nlc3MiLCJlbnYiLCJKV1RfU0VDUkVUIiwiZXJyb3IiLCJjb25zb2xlIiwicmVxdWlyZUF1dGgiLCJoYW5kbGVyIiwicmVxdWVzdCIsImNvb2tpZXMiLCJnZXQiLCJ2YWx1ZSIsInVzZXIiLCJSZXNwb25zZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJzdWNjZXNzIiwic3RhdHVzIiwiaGVhZGVycyIsInJlcXVpcmVSb2xlIiwiYWxsb3dlZFJvbGVzIiwiaW5jbHVkZXMiLCJyb2xlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/database.js":
/*!*****************************!*\
  !*** ./src/lib/database.js ***!
  \*****************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   connectDB: () => (/* binding */ connectDB),\n/* harmony export */   disconnectDB: () => (/* binding */ disconnectDB)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n\nconst MONGODB_URI = process.env.MONGODB_URI;\nif (!MONGODB_URI) {\n    throw new Error(\"Please define the MONGODB_URI environment variable inside .env.local\");\n}\nlet connection = {};\nasync function connectDB() {\n    if (connection.isConnected) {\n        return;\n    }\n    try {\n        const db = await mongoose__WEBPACK_IMPORTED_MODULE_0__.connect(MONGODB_URI);\n        connection.isConnected = db.connections[0].readyState;\n        console.log(\"MongoDB connected successfully\");\n    } catch (error) {\n        console.error(\"MongoDB connection error:\", error);\n        throw error;\n    }\n}\nasync function disconnectDB() {\n    if (connection.isConnected) {\n        await mongoose__WEBPACK_IMPORTED_MODULE_0__.disconnect();\n        connection.isConnected = 0;\n        console.log(\"MongoDB disconnected\");\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RhdGFiYXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnQztBQUVoQyxNQUFNQyxjQUFjQyxRQUFRQyxHQUFHLENBQUNGLFdBQVc7QUFFM0MsSUFBSSxDQUFDQSxhQUFhO0lBQ2hCLE1BQU0sSUFBSUcsTUFDUjtBQUVKO0FBRUEsSUFBSUMsYUFBYSxDQUFDO0FBRWxCLGVBQWVDO0lBQ2IsSUFBSUQsV0FBV0UsV0FBVyxFQUFFO1FBQzFCO0lBQ0Y7SUFFQSxJQUFJO1FBQ0YsTUFBTUMsS0FBSyxNQUFNUiw2Q0FBZ0IsQ0FBQ0M7UUFDbENJLFdBQVdFLFdBQVcsR0FBR0MsR0FBR0UsV0FBVyxDQUFDLEVBQUUsQ0FBQ0MsVUFBVTtRQUNyREMsUUFBUUMsR0FBRyxDQUFDO0lBQ2QsRUFBRSxPQUFPQyxPQUFPO1FBQ2RGLFFBQVFFLEtBQUssQ0FBQyw2QkFBNkJBO1FBQzNDLE1BQU1BO0lBQ1I7QUFDRjtBQUVBLGVBQWVDO0lBQ2IsSUFBSVYsV0FBV0UsV0FBVyxFQUFFO1FBQzFCLE1BQU1QLGdEQUFtQjtRQUN6QkssV0FBV0UsV0FBVyxHQUFHO1FBQ3pCSyxRQUFRQyxHQUFHLENBQUM7SUFDZDtBQUNGO0FBRW1DIiwic291cmNlcyI6WyJFOlxcd2ViXFxEUy0zNjAgUHJvZHVjdHNcXGRhdGFiYXNlLW1hbmFnZW1lbnQtc3lzdGVtXFxzcmNcXGxpYlxcZGF0YWJhc2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xuXG5jb25zdCBNT05HT0RCX1VSSSA9IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJO1xuXG5pZiAoIU1PTkdPREJfVVJJKSB7XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICBcIlBsZWFzZSBkZWZpbmUgdGhlIE1PTkdPREJfVVJJIGVudmlyb25tZW50IHZhcmlhYmxlIGluc2lkZSAuZW52LmxvY2FsXCJcbiAgKTtcbn1cblxubGV0IGNvbm5lY3Rpb24gPSB7fTtcblxuYXN5bmMgZnVuY3Rpb24gY29ubmVjdERCKCkge1xuICBpZiAoY29ubmVjdGlvbi5pc0Nvbm5lY3RlZCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgZGIgPSBhd2FpdCBtb25nb29zZS5jb25uZWN0KE1PTkdPREJfVVJJKTtcbiAgICBjb25uZWN0aW9uLmlzQ29ubmVjdGVkID0gZGIuY29ubmVjdGlvbnNbMF0ucmVhZHlTdGF0ZTtcbiAgICBjb25zb2xlLmxvZyhcIk1vbmdvREIgY29ubmVjdGVkIHN1Y2Nlc3NmdWxseVwiKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiTW9uZ29EQiBjb25uZWN0aW9uIGVycm9yOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZGlzY29ubmVjdERCKCkge1xuICBpZiAoY29ubmVjdGlvbi5pc0Nvbm5lY3RlZCkge1xuICAgIGF3YWl0IG1vbmdvb3NlLmRpc2Nvbm5lY3QoKTtcbiAgICBjb25uZWN0aW9uLmlzQ29ubmVjdGVkID0gMDtcbiAgICBjb25zb2xlLmxvZyhcIk1vbmdvREIgZGlzY29ubmVjdGVkXCIpO1xuICB9XG59XG5cbmV4cG9ydCB7IGNvbm5lY3REQiwgZGlzY29ubmVjdERCIH07XG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJNT05HT0RCX1VSSSIsInByb2Nlc3MiLCJlbnYiLCJFcnJvciIsImNvbm5lY3Rpb24iLCJjb25uZWN0REIiLCJpc0Nvbm5lY3RlZCIsImRiIiwiY29ubmVjdCIsImNvbm5lY3Rpb25zIiwicmVhZHlTdGF0ZSIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsImRpc2Nvbm5lY3REQiIsImRpc2Nvbm5lY3QiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/database.js\n");

/***/ }),

/***/ "(rsc)/./src/models/Document.js":
/*!********************************!*\
  !*** ./src/models/Document.js ***!
  \********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Document: () => (/* binding */ Document)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n\nconst documentSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    name: {\n        type: String,\n        required: true,\n        trim: true\n    },\n    originalName: {\n        type: String,\n        required: true\n    },\n    mimeType: {\n        type: String,\n        required: true\n    },\n    size: {\n        type: Number,\n        required: true\n    },\n    folderId: {\n        type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n        ref: \"Folder\",\n        required: true\n    },\n    googleDriveId: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    googleDriveUrl: {\n        type: String,\n        required: true\n    },\n    content: {\n        type: String,\n        default: \"\"\n    },\n    tags: [\n        {\n            type: String,\n            trim: true\n        }\n    ],\n    uploadedBy: {\n        userId: {\n            type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n            ref: \"User\",\n            required: true\n        },\n        name: {\n            type: String,\n            required: true\n        },\n        email: {\n            type: String,\n            required: true\n        }\n    },\n    // Versioning fields\n    version: {\n        type: Number,\n        default: 1\n    },\n    isLatestVersion: {\n        type: Boolean,\n        default: true\n    },\n    isActive: {\n        type: Boolean,\n        default: true\n    },\n    parentDocumentId: {\n        type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n        ref: \"Document\",\n        default: null\n    },\n    versionHistory: [\n        {\n            version: Number,\n            documentId: {\n                type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n                ref: \"Document\"\n            },\n            uploadedAt: Date,\n            uploadedBy: {\n                userId: {\n                    type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n                    ref: \"User\"\n                },\n                name: String,\n                email: String\n            }\n        }\n    ]\n}, {\n    timestamps: true\n});\n// Indexes for efficient queries\ndocumentSchema.index({\n    folderId: 1\n});\ndocumentSchema.index({\n    tags: 1\n});\ndocumentSchema.index({\n    createdAt: -1\n});\ndocumentSchema.index({\n    name: \"text\",\n    originalName: \"text\",\n    content: \"text\",\n    tags: \"text\"\n});\ndocumentSchema.index({\n    isActive: 1,\n    isLatestVersion: 1\n});\ndocumentSchema.index({\n    parentDocumentId: 1\n});\ndocumentSchema.index({\n    version: 1\n});\nconst Document = mongoose__WEBPACK_IMPORTED_MODULE_0__.models.Document || mongoose__WEBPACK_IMPORTED_MODULE_0__.model(\"Document\", documentSchema);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL0RvY3VtZW50LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWdDO0FBRWhDLE1BQU1DLGlCQUFpQixJQUFJRCw0Q0FBZSxDQUN4QztJQUNFRyxNQUFNO1FBQ0pDLE1BQU1DO1FBQ05DLFVBQVU7UUFDVkMsTUFBTTtJQUNSO0lBQ0FDLGNBQWM7UUFDWkosTUFBTUM7UUFDTkMsVUFBVTtJQUNaO0lBQ0FHLFVBQVU7UUFDUkwsTUFBTUM7UUFDTkMsVUFBVTtJQUNaO0lBQ0FJLE1BQU07UUFDSk4sTUFBTU87UUFDTkwsVUFBVTtJQUNaO0lBQ0FNLFVBQVU7UUFDUlIsTUFBTUosNENBQWUsQ0FBQ2EsS0FBSyxDQUFDQyxRQUFRO1FBQ3BDQyxLQUFLO1FBQ0xULFVBQVU7SUFDWjtJQUNBVSxlQUFlO1FBQ2JaLE1BQU1DO1FBQ05DLFVBQVU7UUFDVlcsUUFBUTtJQUNWO0lBQ0FDLGdCQUFnQjtRQUNkZCxNQUFNQztRQUNOQyxVQUFVO0lBQ1o7SUFDQWEsU0FBUztRQUNQZixNQUFNQztRQUNOZSxTQUFTO0lBQ1g7SUFDQUMsTUFBTTtRQUNKO1lBQ0VqQixNQUFNQztZQUNORSxNQUFNO1FBQ1I7S0FDRDtJQUNEZSxZQUFZO1FBQ1ZDLFFBQVE7WUFDTm5CLE1BQU1KLDRDQUFlLENBQUNhLEtBQUssQ0FBQ0MsUUFBUTtZQUNwQ0MsS0FBSztZQUNMVCxVQUFVO1FBQ1o7UUFDQUgsTUFBTTtZQUNKQyxNQUFNQztZQUNOQyxVQUFVO1FBQ1o7UUFDQWtCLE9BQU87WUFDTHBCLE1BQU1DO1lBQ05DLFVBQVU7UUFDWjtJQUNGO0lBQ0Esb0JBQW9CO0lBQ3BCbUIsU0FBUztRQUNQckIsTUFBTU87UUFDTlMsU0FBUztJQUNYO0lBQ0FNLGlCQUFpQjtRQUNmdEIsTUFBTXVCO1FBQ05QLFNBQVM7SUFDWDtJQUNBUSxVQUFVO1FBQ1J4QixNQUFNdUI7UUFDTlAsU0FBUztJQUNYO0lBQ0FTLGtCQUFrQjtRQUNoQnpCLE1BQU1KLDRDQUFlLENBQUNhLEtBQUssQ0FBQ0MsUUFBUTtRQUNwQ0MsS0FBSztRQUNMSyxTQUFTO0lBQ1g7SUFDQVUsZ0JBQWdCO1FBQ2Q7WUFDRUwsU0FBU2Q7WUFDVG9CLFlBQVk7Z0JBQ1YzQixNQUFNSiw0Q0FBZSxDQUFDYSxLQUFLLENBQUNDLFFBQVE7Z0JBQ3BDQyxLQUFLO1lBQ1A7WUFDQWlCLFlBQVlDO1lBQ1pYLFlBQVk7Z0JBQ1ZDLFFBQVE7b0JBQ05uQixNQUFNSiw0Q0FBZSxDQUFDYSxLQUFLLENBQUNDLFFBQVE7b0JBQ3BDQyxLQUFLO2dCQUNQO2dCQUNBWixNQUFNRTtnQkFDTm1CLE9BQU9uQjtZQUNUO1FBQ0Y7S0FDRDtBQUNILEdBQ0E7SUFDRTZCLFlBQVk7QUFDZDtBQUdGLGdDQUFnQztBQUNoQ2pDLGVBQWVrQyxLQUFLLENBQUM7SUFBRXZCLFVBQVU7QUFBRTtBQUNuQ1gsZUFBZWtDLEtBQUssQ0FBQztJQUFFZCxNQUFNO0FBQUU7QUFDL0JwQixlQUFla0MsS0FBSyxDQUFDO0lBQUVDLFdBQVcsQ0FBQztBQUFFO0FBQ3JDbkMsZUFBZWtDLEtBQUssQ0FBQztJQUNuQmhDLE1BQU07SUFDTkssY0FBYztJQUNkVyxTQUFTO0lBQ1RFLE1BQU07QUFDUjtBQUNBcEIsZUFBZWtDLEtBQUssQ0FBQztJQUFFUCxVQUFVO0lBQUdGLGlCQUFpQjtBQUFFO0FBQ3ZEekIsZUFBZWtDLEtBQUssQ0FBQztJQUFFTixrQkFBa0I7QUFBRTtBQUMzQzVCLGVBQWVrQyxLQUFLLENBQUM7SUFBRVYsU0FBUztBQUFFO0FBRTNCLE1BQU1ZLFdBQ1hyQyw0Q0FBZSxDQUFDcUMsUUFBUSxJQUFJckMsMkNBQWMsQ0FBQyxZQUFZQyxnQkFBZ0IiLCJzb3VyY2VzIjpbIkU6XFx3ZWJcXERTLTM2MCBQcm9kdWN0c1xcZGF0YWJhc2UtbWFuYWdlbWVudC1zeXN0ZW1cXHNyY1xcbW9kZWxzXFxEb2N1bWVudC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XG5cbmNvbnN0IGRvY3VtZW50U2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcbiAge1xuICAgIG5hbWU6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgdHJpbTogdHJ1ZSxcbiAgICB9LFxuICAgIG9yaWdpbmFsTmFtZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgfSxcbiAgICBtaW1lVHlwZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgfSxcbiAgICBzaXplOiB7XG4gICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICB9LFxuICAgIGZvbGRlcklkOiB7XG4gICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXG4gICAgICByZWY6IFwiRm9sZGVyXCIsXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICB9LFxuICAgIGdvb2dsZURyaXZlSWQ6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgdW5pcXVlOiB0cnVlLFxuICAgIH0sXG4gICAgZ29vZ2xlRHJpdmVVcmw6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIH0sXG4gICAgY29udGVudDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZGVmYXVsdDogXCJcIixcbiAgICB9LFxuICAgIHRhZ3M6IFtcbiAgICAgIHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICB0cmltOiB0cnVlLFxuICAgICAgfSxcbiAgICBdLFxuICAgIHVwbG9hZGVkQnk6IHtcbiAgICAgIHVzZXJJZDoge1xuICAgICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXG4gICAgICAgIHJlZjogXCJVc2VyXCIsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIG5hbWU6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICBlbWFpbDoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgfSxcbiAgICB9LFxuICAgIC8vIFZlcnNpb25pbmcgZmllbGRzXG4gICAgdmVyc2lvbjoge1xuICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgZGVmYXVsdDogMSxcbiAgICB9LFxuICAgIGlzTGF0ZXN0VmVyc2lvbjoge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgfSxcbiAgICBpc0FjdGl2ZToge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgfSxcbiAgICBwYXJlbnREb2N1bWVudElkOiB7XG4gICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXG4gICAgICByZWY6IFwiRG9jdW1lbnRcIixcbiAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgfSxcbiAgICB2ZXJzaW9uSGlzdG9yeTogW1xuICAgICAge1xuICAgICAgICB2ZXJzaW9uOiBOdW1iZXIsXG4gICAgICAgIGRvY3VtZW50SWQ6IHtcbiAgICAgICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXG4gICAgICAgICAgcmVmOiBcIkRvY3VtZW50XCIsXG4gICAgICAgIH0sXG4gICAgICAgIHVwbG9hZGVkQXQ6IERhdGUsXG4gICAgICAgIHVwbG9hZGVkQnk6IHtcbiAgICAgICAgICB1c2VySWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCxcbiAgICAgICAgICAgIHJlZjogXCJVc2VyXCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBuYW1lOiBTdHJpbmcsXG4gICAgICAgICAgZW1haWw6IFN0cmluZyxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgXSxcbiAgfSxcbiAge1xuICAgIHRpbWVzdGFtcHM6IHRydWUsXG4gIH1cbik7XG5cbi8vIEluZGV4ZXMgZm9yIGVmZmljaWVudCBxdWVyaWVzXG5kb2N1bWVudFNjaGVtYS5pbmRleCh7IGZvbGRlcklkOiAxIH0pO1xuZG9jdW1lbnRTY2hlbWEuaW5kZXgoeyB0YWdzOiAxIH0pO1xuZG9jdW1lbnRTY2hlbWEuaW5kZXgoeyBjcmVhdGVkQXQ6IC0xIH0pO1xuZG9jdW1lbnRTY2hlbWEuaW5kZXgoe1xuICBuYW1lOiBcInRleHRcIixcbiAgb3JpZ2luYWxOYW1lOiBcInRleHRcIixcbiAgY29udGVudDogXCJ0ZXh0XCIsXG4gIHRhZ3M6IFwidGV4dFwiLFxufSk7XG5kb2N1bWVudFNjaGVtYS5pbmRleCh7IGlzQWN0aXZlOiAxLCBpc0xhdGVzdFZlcnNpb246IDEgfSk7XG5kb2N1bWVudFNjaGVtYS5pbmRleCh7IHBhcmVudERvY3VtZW50SWQ6IDEgfSk7XG5kb2N1bWVudFNjaGVtYS5pbmRleCh7IHZlcnNpb246IDEgfSk7XG5cbmV4cG9ydCBjb25zdCBEb2N1bWVudCA9XG4gIG1vbmdvb3NlLm1vZGVscy5Eb2N1bWVudCB8fCBtb25nb29zZS5tb2RlbChcIkRvY3VtZW50XCIsIGRvY3VtZW50U2NoZW1hKTtcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsImRvY3VtZW50U2NoZW1hIiwiU2NoZW1hIiwibmFtZSIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsInRyaW0iLCJvcmlnaW5hbE5hbWUiLCJtaW1lVHlwZSIsInNpemUiLCJOdW1iZXIiLCJmb2xkZXJJZCIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJnb29nbGVEcml2ZUlkIiwidW5pcXVlIiwiZ29vZ2xlRHJpdmVVcmwiLCJjb250ZW50IiwiZGVmYXVsdCIsInRhZ3MiLCJ1cGxvYWRlZEJ5IiwidXNlcklkIiwiZW1haWwiLCJ2ZXJzaW9uIiwiaXNMYXRlc3RWZXJzaW9uIiwiQm9vbGVhbiIsImlzQWN0aXZlIiwicGFyZW50RG9jdW1lbnRJZCIsInZlcnNpb25IaXN0b3J5IiwiZG9jdW1lbnRJZCIsInVwbG9hZGVkQXQiLCJEYXRlIiwidGltZXN0YW1wcyIsImluZGV4IiwiY3JlYXRlZEF0IiwiRG9jdW1lbnQiLCJtb2RlbHMiLCJtb2RlbCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/models/Document.js\n");

/***/ }),

/***/ "(rsc)/./src/models/Folder.js":
/*!******************************!*\
  !*** ./src/models/Folder.js ***!
  \******************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Folder: () => (/* binding */ Folder)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n\nconst folderSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    name: {\n        type: String,\n        required: true,\n        trim: true\n    },\n    parentId: {\n        type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n        ref: \"Folder\",\n        default: null\n    },\n    path: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    level: {\n        type: Number,\n        required: true,\n        default: 0\n    },\n    googleDriveFolderId: {\n        type: String,\n        default: null\n    },\n    permissions: [\n        {\n            userId: {\n                type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n                ref: \"User\",\n                required: true\n            },\n            userName: {\n                type: String,\n                required: true\n            },\n            userEmail: {\n                type: String,\n                required: true\n            },\n            grantedAt: {\n                type: Date,\n                default: Date.now\n            }\n        }\n    ]\n}, {\n    timestamps: true\n});\n// Index for efficient queries\nfolderSchema.index({\n    parentId: 1\n});\nfolderSchema.index({\n    level: 1\n});\nfolderSchema.index({\n    \"permissions.userId\": 1\n});\nconst Folder = mongoose__WEBPACK_IMPORTED_MODULE_0__.models.Folder || mongoose__WEBPACK_IMPORTED_MODULE_0__.model(\"Folder\", folderSchema);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL0ZvbGRlci5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFnQztBQUVoQyxNQUFNQyxlQUFlLElBQUlELDRDQUFlLENBQ3RDO0lBQ0VHLE1BQU07UUFDSkMsTUFBTUM7UUFDTkMsVUFBVTtRQUNWQyxNQUFNO0lBQ1I7SUFDQUMsVUFBVTtRQUNSSixNQUFNSiw0Q0FBZSxDQUFDUyxLQUFLLENBQUNDLFFBQVE7UUFDcENDLEtBQUs7UUFDTEMsU0FBUztJQUNYO0lBQ0FDLE1BQU07UUFDSlQsTUFBTUM7UUFDTkMsVUFBVTtRQUNWUSxRQUFRO0lBQ1Y7SUFDQUMsT0FBTztRQUNMWCxNQUFNWTtRQUNOVixVQUFVO1FBQ1ZNLFNBQVM7SUFDWDtJQUNBSyxxQkFBcUI7UUFDbkJiLE1BQU1DO1FBQ05PLFNBQVM7SUFDWDtJQUNBTSxhQUFhO1FBQ1g7WUFDRUMsUUFBUTtnQkFDTmYsTUFBTUosNENBQWUsQ0FBQ1MsS0FBSyxDQUFDQyxRQUFRO2dCQUNwQ0MsS0FBSztnQkFDTEwsVUFBVTtZQUNaO1lBQ0FjLFVBQVU7Z0JBQ1JoQixNQUFNQztnQkFDTkMsVUFBVTtZQUNaO1lBQ0FlLFdBQVc7Z0JBQ1RqQixNQUFNQztnQkFDTkMsVUFBVTtZQUNaO1lBQ0FnQixXQUFXO2dCQUNUbEIsTUFBTW1CO2dCQUNOWCxTQUFTVyxLQUFLQyxHQUFHO1lBQ25CO1FBQ0Y7S0FDRDtBQUNILEdBQ0E7SUFDRUMsWUFBWTtBQUNkO0FBR0YsOEJBQThCO0FBQzlCeEIsYUFBYXlCLEtBQUssQ0FBQztJQUFFbEIsVUFBVTtBQUFFO0FBQ2pDUCxhQUFheUIsS0FBSyxDQUFDO0lBQUVYLE9BQU87QUFBRTtBQUM5QmQsYUFBYXlCLEtBQUssQ0FBQztJQUFFLHNCQUFzQjtBQUFFO0FBRXRDLE1BQU1DLFNBQ1gzQiw0Q0FBZSxDQUFDMkIsTUFBTSxJQUFJM0IsMkNBQWMsQ0FBQyxVQUFVQyxjQUFjIiwic291cmNlcyI6WyJFOlxcd2ViXFxEUy0zNjAgUHJvZHVjdHNcXGRhdGFiYXNlLW1hbmFnZW1lbnQtc3lzdGVtXFxzcmNcXG1vZGVsc1xcRm9sZGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tIFwibW9uZ29vc2VcIjtcblxuY29uc3QgZm9sZGVyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcbiAge1xuICAgIG5hbWU6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgdHJpbTogdHJ1ZSxcbiAgICB9LFxuICAgIHBhcmVudElkOiB7XG4gICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXG4gICAgICByZWY6IFwiRm9sZGVyXCIsXG4gICAgICBkZWZhdWx0OiBudWxsLFxuICAgIH0sXG4gICAgcGF0aDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICB1bmlxdWU6IHRydWUsXG4gICAgfSxcbiAgICBsZXZlbDoge1xuICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICBkZWZhdWx0OiAwLFxuICAgIH0sXG4gICAgZ29vZ2xlRHJpdmVGb2xkZXJJZDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICB9LFxuICAgIHBlcm1pc3Npb25zOiBbXG4gICAgICB7XG4gICAgICAgIHVzZXJJZDoge1xuICAgICAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCxcbiAgICAgICAgICByZWY6IFwiVXNlclwiLFxuICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICB1c2VyTmFtZToge1xuICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgdXNlckVtYWlsOiB7XG4gICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBncmFudGVkQXQ6IHtcbiAgICAgICAgICB0eXBlOiBEYXRlLFxuICAgICAgICAgIGRlZmF1bHQ6IERhdGUubm93LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICBdLFxuICB9LFxuICB7XG4gICAgdGltZXN0YW1wczogdHJ1ZSxcbiAgfVxuKTtcblxuLy8gSW5kZXggZm9yIGVmZmljaWVudCBxdWVyaWVzXG5mb2xkZXJTY2hlbWEuaW5kZXgoeyBwYXJlbnRJZDogMSB9KTtcbmZvbGRlclNjaGVtYS5pbmRleCh7IGxldmVsOiAxIH0pO1xuZm9sZGVyU2NoZW1hLmluZGV4KHsgXCJwZXJtaXNzaW9ucy51c2VySWRcIjogMSB9KTtcblxuZXhwb3J0IGNvbnN0IEZvbGRlciA9XG4gIG1vbmdvb3NlLm1vZGVscy5Gb2xkZXIgfHwgbW9uZ29vc2UubW9kZWwoXCJGb2xkZXJcIiwgZm9sZGVyU2NoZW1hKTtcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsImZvbGRlclNjaGVtYSIsIlNjaGVtYSIsIm5hbWUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJ0cmltIiwicGFyZW50SWQiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwiZGVmYXVsdCIsInBhdGgiLCJ1bmlxdWUiLCJsZXZlbCIsIk51bWJlciIsImdvb2dsZURyaXZlRm9sZGVySWQiLCJwZXJtaXNzaW9ucyIsInVzZXJJZCIsInVzZXJOYW1lIiwidXNlckVtYWlsIiwiZ3JhbnRlZEF0IiwiRGF0ZSIsIm5vdyIsInRpbWVzdGFtcHMiLCJpbmRleCIsIkZvbGRlciIsIm1vZGVscyIsIm1vZGVsIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/models/Folder.js\n");

/***/ }),

/***/ "(rsc)/./src/models/User.js":
/*!****************************!*\
  !*** ./src/models/User.js ***!
  \****************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   User: () => (/* binding */ User)\n/* harmony export */ });\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n\n\nconst userSchema = new mongoose__WEBPACK_IMPORTED_MODULE_1__.Schema({\n    email: {\n        type: String,\n        required: true,\n        unique: true,\n        lowercase: true,\n        trim: true\n    },\n    name: {\n        type: String,\n        required: true,\n        trim: true\n    },\n    password: {\n        type: String,\n        required: true,\n        minlength: 6\n    },\n    role: {\n        type: String,\n        enum: [\n            \"admin\",\n            \"facilitator\",\n            \"employee\"\n        ],\n        default: \"employee\"\n    },\n    hasDocumentAccess: {\n        type: Boolean,\n        default: false\n    },\n    avatar: {\n        type: String\n    }\n}, {\n    timestamps: true\n});\n// Hash password before saving\nuserSchema.pre(\"save\", async function(next) {\n    if (!this.isModified(\"password\")) return next();\n    try {\n        const salt = await bcryptjs__WEBPACK_IMPORTED_MODULE_0__.genSalt(12);\n        this.password = await bcryptjs__WEBPACK_IMPORTED_MODULE_0__.hash(this.password, salt);\n        next();\n    } catch (error) {\n        next(error);\n    }\n});\n// Compare password method\nuserSchema.methods.comparePassword = async function(candidatePassword) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_0__.compare(candidatePassword, this.password);\n};\nconst User = mongoose__WEBPACK_IMPORTED_MODULE_1__.models.User || mongoose__WEBPACK_IMPORTED_MODULE_1__.model(\"User\", userSchema);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL1VzZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQThCO0FBQ0U7QUFFaEMsTUFBTUUsYUFBYSxJQUFJRCw0Q0FBZSxDQUNwQztJQUNFRyxPQUFPO1FBQ0xDLE1BQU1DO1FBQ05DLFVBQVU7UUFDVkMsUUFBUTtRQUNSQyxXQUFXO1FBQ1hDLE1BQU07SUFDUjtJQUNBQyxNQUFNO1FBQ0pOLE1BQU1DO1FBQ05DLFVBQVU7UUFDVkcsTUFBTTtJQUNSO0lBQ0FFLFVBQVU7UUFDUlAsTUFBTUM7UUFDTkMsVUFBVTtRQUNWTSxXQUFXO0lBQ2I7SUFDQUMsTUFBTTtRQUNKVCxNQUFNQztRQUNOUyxNQUFNO1lBQUM7WUFBUztZQUFlO1NBQVc7UUFDMUNDLFNBQVM7SUFDWDtJQUNBQyxtQkFBbUI7UUFDakJaLE1BQU1hO1FBQ05GLFNBQVM7SUFDWDtJQUNBRyxRQUFRO1FBQ05kLE1BQU1DO0lBQ1I7QUFDRixHQUNBO0lBQ0VjLFlBQVk7QUFDZDtBQUdGLDhCQUE4QjtBQUM5QmxCLFdBQVdtQixHQUFHLENBQUMsUUFBUSxlQUFnQkMsSUFBSTtJQUN6QyxJQUFJLENBQUMsSUFBSSxDQUFDQyxVQUFVLENBQUMsYUFBYSxPQUFPRDtJQUV6QyxJQUFJO1FBQ0YsTUFBTUUsT0FBTyxNQUFNeEIsNkNBQWMsQ0FBQztRQUNsQyxJQUFJLENBQUNZLFFBQVEsR0FBRyxNQUFNWiwwQ0FBVyxDQUFDLElBQUksQ0FBQ1ksUUFBUSxFQUFFWTtRQUNqREY7SUFDRixFQUFFLE9BQU9LLE9BQU87UUFDZEwsS0FBS0s7SUFDUDtBQUNGO0FBRUEsMEJBQTBCO0FBQzFCekIsV0FBVzBCLE9BQU8sQ0FBQ0MsZUFBZSxHQUFHLGVBQWdCQyxpQkFBaUI7SUFDcEUsT0FBTzlCLDZDQUFjLENBQUM4QixtQkFBbUIsSUFBSSxDQUFDbEIsUUFBUTtBQUN4RDtBQUVPLE1BQU1vQixPQUFPL0IsNENBQWUsQ0FBQytCLElBQUksSUFBSS9CLDJDQUFjLENBQUMsUUFBUUMsWUFBWSIsInNvdXJjZXMiOlsiRTpcXHdlYlxcRFMtMzYwIFByb2R1Y3RzXFxkYXRhYmFzZS1tYW5hZ2VtZW50LXN5c3RlbVxcc3JjXFxtb2RlbHNcXFVzZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0anNcIjtcbmltcG9ydCBtb25nb29zZSBmcm9tIFwibW9uZ29vc2VcIjtcblxuY29uc3QgdXNlclNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoXG4gIHtcbiAgICBlbWFpbDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICB1bmlxdWU6IHRydWUsXG4gICAgICBsb3dlcmNhc2U6IHRydWUsXG4gICAgICB0cmltOiB0cnVlLFxuICAgIH0sXG4gICAgbmFtZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICB0cmltOiB0cnVlLFxuICAgIH0sXG4gICAgcGFzc3dvcmQ6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgbWlubGVuZ3RoOiA2LFxuICAgIH0sXG4gICAgcm9sZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZW51bTogW1wiYWRtaW5cIiwgXCJmYWNpbGl0YXRvclwiLCBcImVtcGxveWVlXCJdLFxuICAgICAgZGVmYXVsdDogXCJlbXBsb3llZVwiLFxuICAgIH0sXG4gICAgaGFzRG9jdW1lbnRBY2Nlc3M6IHtcbiAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB9LFxuICAgIGF2YXRhcjoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0aW1lc3RhbXBzOiB0cnVlLFxuICB9XG4pO1xuXG4vLyBIYXNoIHBhc3N3b3JkIGJlZm9yZSBzYXZpbmdcbnVzZXJTY2hlbWEucHJlKFwic2F2ZVwiLCBhc3luYyBmdW5jdGlvbiAobmV4dCkge1xuICBpZiAoIXRoaXMuaXNNb2RpZmllZChcInBhc3N3b3JkXCIpKSByZXR1cm4gbmV4dCgpO1xuXG4gIHRyeSB7XG4gICAgY29uc3Qgc2FsdCA9IGF3YWl0IGJjcnlwdC5nZW5TYWx0KDEyKTtcbiAgICB0aGlzLnBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2godGhpcy5wYXNzd29yZCwgc2FsdCk7XG4gICAgbmV4dCgpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIG5leHQoZXJyb3IpO1xuICB9XG59KTtcblxuLy8gQ29tcGFyZSBwYXNzd29yZCBtZXRob2RcbnVzZXJTY2hlbWEubWV0aG9kcy5jb21wYXJlUGFzc3dvcmQgPSBhc3luYyBmdW5jdGlvbiAoY2FuZGlkYXRlUGFzc3dvcmQpIHtcbiAgcmV0dXJuIGJjcnlwdC5jb21wYXJlKGNhbmRpZGF0ZVBhc3N3b3JkLCB0aGlzLnBhc3N3b3JkKTtcbn07XG5cbmV4cG9ydCBjb25zdCBVc2VyID0gbW9uZ29vc2UubW9kZWxzLlVzZXIgfHwgbW9uZ29vc2UubW9kZWwoXCJVc2VyXCIsIHVzZXJTY2hlbWEpO1xuIl0sIm5hbWVzIjpbImJjcnlwdCIsIm1vbmdvb3NlIiwidXNlclNjaGVtYSIsIlNjaGVtYSIsImVtYWlsIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwidW5pcXVlIiwibG93ZXJjYXNlIiwidHJpbSIsIm5hbWUiLCJwYXNzd29yZCIsIm1pbmxlbmd0aCIsInJvbGUiLCJlbnVtIiwiZGVmYXVsdCIsImhhc0RvY3VtZW50QWNjZXNzIiwiQm9vbGVhbiIsImF2YXRhciIsInRpbWVzdGFtcHMiLCJwcmUiLCJuZXh0IiwiaXNNb2RpZmllZCIsInNhbHQiLCJnZW5TYWx0IiwiaGFzaCIsImVycm9yIiwibWV0aG9kcyIsImNvbXBhcmVQYXNzd29yZCIsImNhbmRpZGF0ZVBhc3N3b3JkIiwiY29tcGFyZSIsIlVzZXIiLCJtb2RlbHMiLCJtb2RlbCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/models/User.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/ms","vendor-chunks/semver","vendor-chunks/jsonwebtoken","vendor-chunks/lodash.includes","vendor-chunks/lodash.once","vendor-chunks/lodash.isinteger","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/lodash.isplainobject","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isboolean","vendor-chunks/safe-buffer","vendor-chunks/buffer-equal-constant-time","vendor-chunks/bcryptjs"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fdashboard%2Fstats%2Froute&page=%2Fapi%2Fdashboard%2Fstats%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdashboard%2Fstats%2Froute.js&appDir=E%3A%5Cweb%5CDS-360%20Products%5Cdatabase-management-system%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5Cweb%5CDS-360%20Products%5Cdatabase-management-system&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();